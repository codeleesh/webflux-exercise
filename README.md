# WebFlux 정리

## batch 연산자

### 개수 기반 : `.buffer(100)`
- 정확히 N개씩 묶음 (마지막 그룹은 부족할 수 있음)

### 시간 시반 : `.buffer(Duration.ofSecondes(10))`
- 지정된 시간마다 그룹 생성
- 실시간 처리에 적합

### 개수 OR 시간 기반 : `.bufferTimeout(int, Duration)`
- 개수 OR 시간(먼저 도달하는 조건)

### 조건 기반 : `.bufferUntil(condition)`
- 특정 조건이 만족될 때까지 버퍼링
- 동적 그룹핑 가능

### 조건 기반 : `.bufferWhile(condition)`
- 특정 조건이 불만족하는 아이템전까지
- 동적 그룹핑 가능

## doOn 연산자
### doOnSuccess
- `Mono`에만 존재

### doOnSubscribe
- 구독 시작 시점 감지
- 리소스 준비, 권한 검사, 메트릭 시작에 활용

### doOnNext
- 각 데이터 아이템 처리 시점
- 실시간 알림, 캐시 업데이트, 통계 수집에 활용
- 성능 주의: 가장 빈번히 호출됨
- 스트림 중간에 에러 발생 시 남은 아이템 처리 안됨

### doOnComplete
- 스트림 정상 완료 시점
- 후처리 작업, 리소스 정리, 완료 알림에 활용

### doOnError
- 에러 발생 시점 
- 에러 로깅, 보상 트랜잭션, 장애 대응에 활용

### 실무에서 가장 유용한 패턴
- 전체 라이프사이클 모니터링: 4개 연산자 조합으로 API 전체 추적
- 실시간 메트릭 수집: 성능 지표와 비즈니스 메트릭 동시 수집
- 장애 대응 자동화: 에러 감지 → 알림 → 보상 작업 파이프라인

